<html layout:decorate="~{layout/layout.html}">
    <body>
        <section layout:fragment="content">
            <h1>join</h1>

            <form th:action="@{/member/join}"
                  method="post"
                  onsubmit="checkForm(this); return false;"
                  class="flex flex-col gap-2">
                <div class="flex flex-col">
                    <label for="username">아이디</label>
                    <input type="text"
                           name="username"
                           id="username"
                           placeholder="아아디"
                           th:value="${member != null ? member.username : ''}"
                           class="input"/>
                </div>
                <div class="flex flex-col">
                    <label for="password">비밀번호</label>
                    <input type="password"
                           name="password"
                           id="password"
                           placeholder="비밀번호"
                           th:value="${member != null ? member.password : ''}"
                           class="input"/>
                </div>
                <div class="flex flex-col">
                    <label for="passwordConfirm">비밀번호 확인</label>
                    <input type="password"
                           name="passwordConfirm"
                           id="passwordConfirm"
                           placeholder="비밀번호 확인"
                           class="input"/>
                </div>
                <div>
                    <button type="submit" class="btn">제출</button>
                </div>
            </form>

            <script>
                function checkForm(form)
                {
                    // 아이디 확인
                    form.username.value = form.username.value.trim();
                    const username = form.username;

                    if (username.value === "")
                    {
                        alert("username not found");
                        username.focus();
                        return;
                    }

                    // 비밀번호 확인
                    form.password.value = form.password.value.trim();
                    const password = form.password;

                    if (password.value === "")
                    {
                        alert("password not found");
                        password.focus();
                        return;
                    }

                    // 확인 비밀번호 확인
                    form.passwordConfirm.value = form.passwordConfirm.value.trim();
                    const passwordConfirm = form.passwordConfirm;

                    if (passwordConfirm.value === "")
                    {
                        alert("passwordConfirm not found");
                        passwordConfirm.focus();
                        return;
                    }

                    form.submit();
                }
            </script>
        </section>
    </body>
</html>